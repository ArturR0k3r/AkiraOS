# ESP32-C3 DevKitM Specific Configuration
# RISC-V single-core @ 160MHz with WiFi + BLE 5.0

# Memory configuration (ESP32-C3 has limited SRAM ~400KB)
# Reduced heap to fit in memory
CONFIG_HEAP_MEM_POOL_SIZE=32768
CONFIG_MAIN_STACK_SIZE=3072
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=1536

# ESP32-C3 WiFi
CONFIG_WIFI=y
CONFIG_ESP32_WIFI_STA_AUTO_DHCPV4=y

# Bluetooth (ESP32-C3 supports BLE 5.0) - DISABLED to save RAM
# Enable one of WiFi or BT, not both, due to RAM constraints
CONFIG_BT=n
# CONFIG_BT_PERIPHERAL=y
# CONFIG_BT_DEVICE_NAME="AkiraOS-C3"

# SPI for display
CONFIG_SPI=y

# I2C for sensors
CONFIG_I2C=y
CONFIG_SENSOR=y

# GPIO
CONFIG_GPIO=y

# ADC - disabled to save space
CONFIG_ADC=n

# Flash/Storage
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y

# Watchdog
CONFIG_WATCHDOG=y

# PWM - disabled to save space
CONFIG_PWM=n

# Console
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y

# Reduce logging to save RAM
CONFIG_LOG_BUFFER_SIZE=256
CONFIG_LOG_DEFAULT_LEVEL=1
CONFIG_LOG_MAX_LEVEL=2

# Disable features to save RAM
CONFIG_SHELL_HISTORY=n
CONFIG_SHELL_TAB=n
CONFIG_SHELL_TAB_AUTOCOMPLETION=n
CONFIG_SHELL_WILDCARD=n
CONFIG_SHELL_HELP=y
CONFIG_SHELL_HELP_ON_WRONG_ARGUMENT_COUNT=n

# Reduce network buffer sizes
CONFIG_NET_BUF_DATA_SIZE=128
CONFIG_NET_PKT_RX_COUNT=8
CONFIG_NET_PKT_TX_COUNT=8
CONFIG_NET_BUF_RX_COUNT=8
CONFIG_NET_BUF_TX_COUNT=8

###############################################################################
# App Manager - Enabled with minimal WAMR for RAM-constrained ESP32-C3
###############################################################################
CONFIG_AKIRA_APP_MANAGER=y

# WAMR optimizations for reduced memory footprint
CONFIG_AKIRA_WAMR_MINI_LOADER=y
CONFIG_AKIRA_WAMR_MINIMAL=y

# Reduced memory settings for WASM runtime
CONFIG_OCRE_WAMR_HEAP_BUFFER_SIZE=8192
CONFIG_OCRE_CONTAINER_DEFAULT_STACK_SIZE=2048
CONFIG_OCRE_CONTAINER_DEFAULT_HEAP_SIZE=8192
CONFIG_MAX_CONTAINERS=2
