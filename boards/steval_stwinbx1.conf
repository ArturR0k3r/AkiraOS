###############################################################################
# STEVAL-STWINBX1 Board Configuration
# STM32U585 ARM Cortex-M33, 768KB SRAM, Advanced Multi-Sensor Platform
###############################################################################

###############################################################################
# Memory Configuration
###############################################################################
CONFIG_HEAP_MEM_POOL_SIZE=131072
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048
CONFIG_SHELL_STACK_SIZE=3072
CONFIG_ISR_STACK_SIZE=2048
CONFIG_IDLE_STACK_SIZE=512

###############################################################################
# Bluetooth via BlueNRG-M2SA (on SPI3)
###############################################################################
CONFIG_BT=y
CONFIG_BT_HCI=y
CONFIG_BT_HCI_VS=y
CONFIG_BT_BLUENRG_ACI=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_DEVICE_NAME="AkiraOS-STWINBX1"
CONFIG_BT_BUF_ACL_RX_SIZE=128
CONFIG_BT_BUF_ACL_TX_SIZE=128
CONFIG_BT_RX_STACK_SIZE=1536
CONFIG_BT_HCI_TX_STACK_SIZE=768

###############################################################################
# Peripherals
###############################################################################
CONFIG_GPIO=y
CONFIG_I2C=y
CONFIG_SPI=y
CONFIG_SENSOR=y
CONFIG_ADC=y
CONFIG_PWM=y
CONFIG_WATCHDOG=y

###############################################################################
# STWINBX1 Sensors (6 integrated sensors)
###############################################################################
# Temperature sensor
CONFIG_STTS22H=y

# 6-axis accelerometer/gyroscope with ML Core
CONFIG_ISM330DHCX=y
CONFIG_ISM330DHCX_TRIGGER_GLOBAL_THREAD=y

# 3-axis accelerometer
CONFIG_IIS2DLPC=y
CONFIG_IIS2DLPC_TRIGGER_GLOBAL_THREAD=y

# Inclinometer with ML Core
CONFIG_IIS2ICLX=y

# Magnetometer
CONFIG_IIS2MDC=y
CONFIG_IIS2MDC_TRIGGER_GLOBAL_THREAD=y

# Pressure sensor (optional)
# CONFIG_LPS22DF=y

###############################################################################
# USB Type-C Support
###############################################################################
CONFIG_USB_DEVICE_STACK=y
CONFIG_USB_CDC_ACM=y
CONFIG_UART_LINE_CTRL=y

###############################################################################
# Storage - NVS on internal flash
###############################################################################
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y

# Settings backend
CONFIG_SETTINGS=y
CONFIG_SETTINGS_NVS=y

###############################################################################
# SD Card Support (microSD socket)
###############################################################################
CONFIG_DISK_ACCESS=y
CONFIG_SDMMC_STACK=y
CONFIG_FILE_SYSTEM=y
CONFIG_FAT_FILESYSTEM_ELM=y

###############################################################################
# Cryptography with hardware acceleration
###############################################################################
CONFIG_MBEDTLS=y
CONFIG_MBEDTLS_BUILTIN=y

###############################################################################
# Power Management
###############################################################################
CONFIG_PM=y
CONFIG_PM_DEVICE=y

###############################################################################
# Logging - Optimized for flash constraints
###############################################################################
CONFIG_LOG_MODE_IMMEDIATE=y
CONFIG_LOG_DEFAULT_LEVEL=2
CONFIG_SIZE_OPTIMIZATIONS=y
CONFIG_LOG_MODE_MINIMAL=y

###############################################################################
# OCRE Runtime for WebAssembly Apps (minimal footprint)
###############################################################################
CONFIG_MAX_CONTAINERS=1
CONFIG_OCRE_CONTAINER_DEFAULT_STACK_SIZE=2048
CONFIG_OCRE_CONTAINER_DEFAULT_HEAP_SIZE=8192
CONFIG_OCRE_WAMR_HEAP_BUFFER_SIZE=65536

###############################################################################
# Disable Features Not Available
###############################################################################
CONFIG_DAC=n
CONFIG_CAN=n
CONFIG_RTC=n

###############################################################################
# Note: Rich sensor platform suitable for IoT/edge AI applications
# Limited WiFi support - consider for Bluetooth + Wired (USB/SD) connectivity
###############################################################################
